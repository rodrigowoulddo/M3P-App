
<ion-header>

  <ion-navbar>
    <!--<ion-title>{{setor.sigla}}</ion-title>-->

    <ion-buttons end>
      <button ion-button icon-only (click)="editarSetor()">
        <ion-icon name="create"></ion-icon>
      </button>

      <button ion-button icon-only (click)="excluirSetor()">
        <ion-icon name="trash"></ion-icon>
      </button>
    </ion-buttons>

  </ion-navbar>

</ion-header>


<ion-content>

  <div padding class="browser-compat">
    <ion-card>

      <ion-card-header>
        <ion-item>
          <h1 text-center width-50 class="nome-setor">{{setor.nome}}</h1>
          <p text-center>({{setor.sigla}})</p>
        </ion-item>
      </ion-card-header>

      <ion-list>

        <ion-item *ngIf="setor.vinculo">
          <p>Vínculo</p>
          <h2>{{setor.vinculo}}</h2>
        </ion-item>

        <ion-item>
          <p>Nível Atual</p>
          <h2>{{setor.nivel? setor.nivel : "NA"}}</h2>
        </ion-item>

        <ion-item>
          <p>Líder de Processos</p>
          <h2>{{setor.lider? setor.lider : "Não especificado"}}</h2>
        </ion-item>

        <ion-item>
          <p>Email do Líder</p>
          <h2>{{setor.emailLider? setor.emailLider : "Não especificado"}}</h2>
        </ion-item>

        <ion-item>
          <p>Última Avaliação</p>
          <h2>{{setor.ultimaAvaliacao? setor.ultimaAvaliacao : "NA"}}</h2>
        </ion-item>

      </ion-list>
    </ion-card>

    <ion-card>
      <ion-card-header>
        Histórico de Avaliações
      </ion-card-header>

      <ion-list>

        <div *ngFor="let avaliacao of historico$ | async | reverse; let i = index">
          <ion-item *ngIf="mostrarHistoricoCompleto || (i <= 2)">

            <!--Caso ja tenha finalizado-->
            <h3 ion-text [color]="avaliacao.dataFim? 'dark' : 'danger'">{{avaliacao.dataFim? avaliacao.nivelAtingido : 'Em andamento'}}</h3>
            <p>{{avaliacao.dataFim? avaliacao.dataFim: avaliacao.dataInicio}}</p>


            <!--Botão de avaliação complementar-->
            <button small round outline ion-button item-end icon-right *ngIf="(avaliacao.dataFim) && (i==0)" (click)="iniciarAvaliacaoComplementarClick(avaliacao)">
              Retomar
              <ion-icon color="danger" name="refresh"></ion-icon>
            </button>

          </ion-item>

        </div>


      </ion-list>

      <button ion-button clear small full
      (click)="verMaisMenosClick()">{{btnVerMaisMenosContent}}</button>

    </ion-card>
  </div>


  <ion-fab bottom right>
    <button ion-fab color="danger" (click)="avaliarSetor()"><ion-icon name="clipboard"></ion-icon></button>
  </ion-fab>

</ion-content>
